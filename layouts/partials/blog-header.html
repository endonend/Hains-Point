<script language="javascript">

    var archive_results = {};
    
    function downloadArchive() {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                archive_results = JSON.parse(this.responseText);
            }
        };
        xmlhttp.open("GET", "/archive/index.json", true);
        xmlhttp.send();
    }
    
    function runSearch(q) {
        var results_node = document.getElementById("list_results");
        results_node.innerHTML = "";
        if (q.length > 0) {
            for (var i = 0; i < archive_results.items.length; i++) {
                var item = archive_results.items[i];
                var title_lower = item.title.toLowerCase();
                var text_lower = item.content_text.toLowerCase();
                if (title_lower.includes(q) || text_lower.includes(q)) {
                    var p_node = document.createElement("p");        
                    var link_node = document.createElement("a");
                    var d = Date.parse(item.date_published);
                    var date_s = new Date(d).toISOString().substr(0, 10);
                    var date_node = document.createTextNode(date_s); 
                    link_node.appendChild(date_node);
                    link_node.href = item.url;
                    var title_node = null;
                    if (item.title.length > 0) {
                        title_node = document.createElement("span");
                        title_node.innerHTML = ": <b>" + item.title + "</b>"
                        s = item.title + ": " + item.content_text;
                    }
                    var s = item.content_text;
                    if (s.length > 200) {
                        s = s.substr(0, 200) + "...";
                    }
                    var text_node = document.createElement("span");
                    text_node.innerHTML = ": " + s
                    p_node.appendChild(link_node);
                    if (title_node != null) {
                        p_node.appendChild(title_node);
                    }
                    p_node.appendChild(text_node);
                    results_node.appendChild(p_node);
                }
            }
        } 
    }
    
    downloadArchive();
    
    </script>


{{ $categoryList := ($.Site.GetPage "taxonomyTerm" "categories").Pages }}

<div class="container">
      <header class="blog-header py-3">
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <div class="container-fluid">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none py-2 px-10">
                    
                    <!-- Blog logo -->
                      <img src="https://endonend.micro.blog/uploads/2022/37f159d602.png" alt="Logo" height="40" width="200" />
                    </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul id="main-navigation" class="navbar-nav me-auto mb-2 mb-md-0">
                        <li class="nav-item"><a href="/">Home</a></li>
                        {{ range .Site.Menus.main }}
                            {{ if .Page.Params.redirect_url }}
                                <li class="nav-item"><a href="{{ .Page.Params.redirect_url }}" class="nav-link">{{ .Name }}</a></li>
                            {{ else }}
                                <li class="nav-item"><a href="{{ .URL | relLangURL | safeURL }}" class="nav-link">{{ .Name }}</a></li>
                            {{ end }}
                        {{ end }}
                    </ul>
              </div>
            </div>
          </nav>
      </header>
</div>